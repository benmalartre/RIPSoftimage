<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>ELIHair Documentation</title>
  <meta name="description" content="ELIHair Documentation">
  <meta name="author" content="benmalartre">
  <link rel="stylesheet" href="style.css">
 
</head>
<body>
	<h1 id="top">ELIHair Documentation</h1>
	<nav>
			<ul>
				<li><a href="#Overview">Overview</a></li>
				<li><a href="#Modeling Rules">Modeling Rules</a></li>
				<li><a href="#Grooming">Grooming</a></li>
				<li><a href="#Dynamics">Dynamics</a></li>
				<li><a href="#How does it works??">How does it work??</a></li>
			</ul>
		</nav>
	<img src="images/Header.jpg" class="picture"></img>
	<span id="Overview"></span>
	<h2>Overview</h2>
	<p>ELIHair is a set of custom ICE Nodes and custom ICE compounds, which will fill a polygon mesh with ICE strands.<br></p>
	<p>The artist provides only a few objects :<br>
	- a valid <strong>Polymesh Guide</strong> cage(see modeling rules below), with a Polygon Cluster describing TIP island<br>
	- an optional <strong>UpVector Curve</strong> for proper Hair Orientation<br>
	- an optional <strong>Polymesh Skull</strong> for correcting emit position as well as paintaing some maps(clone_map,spread_map,size_map)<br>
	<p><strong>Animation/Dynamics</strong> are done by deforming the polymesh guide with any method you want(rigging, softbodies, cloth simulation...).<br>
	However we provides only methods for simulated deformation(Softbodies, Syflex Cloth)<br>
	</p>
	<img src="images/Grooming.jpg" class="picture"></img><br>

	<span id="Modeling Rules"></span>
	<h2> Modeling Rules</h2>
	<p><strong>- Triangles and NGons are NOT supported!!</strong> In fact you can have Triangles or NGons, but only inside TipPolygon cluster<br></p>
	<p><strong>- Never use Freeze</strong> on polymesh guide when hair cloud in the scene.<strong> Use FreezeM</strong> instead.<br>
	Or delete all hair data using DELETE button(see Grooming) BEFORE use Freeze<br>
	If you freeze polymesh guide while ICETree on cloud is reading data from it, XSI will freeze...<br>
	<p><strong>- Branching : </strong>
	<p>Branching in 2D<p>
	<img src="images/ModelingBranch.jpg" class="picture"></img>
	<p>Branching in 3D<p>
	<img src="images/ModelingBranch3d.jpg" class="picture"></img>
  
	<h2 id="Grooming">Grooming</h2>
	<p>
		Custom Menu for applying hair properties, under ICE/Particles/Hair<br>
		Select your polymesh guide object and call Groom Property(if it already in place, we simply inspect the property...)<br>
	</p>
	<img src="images/CustomMenu.jpg" class="picture"></img>
	
	<div class="property">
	<h2>Groom Property</h2>
	<h3>UpVector Curve</h3>
	<p>This curve acts as target for hair orientation. Should be on Skull.</p>
	<h3>Skull Mesh</h3>
	<p>Polymesh object describing Skull Geometry. Hair are bound to this Geometry by closest location queries.<br>
	This mesh also contains weight maps used by ELIHairCloner</p>
	<h3>Tip Polygons Cluster</h3>
	<p>CreateFromSel : From selected polygons, will create TipPolygons cluster.<br>
	AddSell : Will add selected polygons to TipPolygons cluster.<br>
	RemoveSel : Will remove selected polygons from TipPolygons cluster.<br>
	Show : Will select TipPolygons cluster.<br></p>
	Updating the cluster involves deleting the hair cloud and deleting polymesh guide ICETrees, to force a correct update,<br>
	update the cluster, and finally recreate the hair cloud loading a not so complete preset of the hair before deletion.<br>
	
	<h3>Tools</h3>
	<p>
	BUILD : will create all necessary ICETrees and object for generate hairs from polymesh guide<br>
	DELETE : will delete hair cloud and ICETrees associated to this polymesh guide<br>
	INSPECT : will open ICE compound PPG for hair associated to this polymesh guide<br>
	</p>
	</div>
	<div class="ppg">
	<img src="images/CustomMenu.jpg" class="picture"></img>
	</div>
	<p>
	This Property is used for deleting and recreating the Hair Cloud during the modeling process<br>
	Current state of the hair is saved in a preset when DELETE called or when 
	</p>
	
	<h2 id="Dynamics">Dynamics</h2>
	<p>
		Custom Menu for applying hair properties, under ICE/Particles/Hair<br>
		Select your polymesh guide object and call Dynamics Property(if it already in place, we simply inspect the property...)<br>
	</p>
	<img src="images/CustomMenu.jpg" class="picture"></img>
	
	<span id="How does it works??"></span>
	<h2>How does it works?</h2>
	<p><strong>1 : Mesh Walking</strong></p>
	<p>
	-Guide strands are generated by <strong>walking</strong> the mesh from <strong>TIP</strong> to <strong>ROOT</strong><br>
	-<strong>TIPS</strong> are defined by <strong>a polygon cluster called "TipPolygons"</strong><br>
	-We create <strong>one branch by tip polygon island</strong>. Those branch walk over the mesh, level after level until either root reached or branching occurs.<br>
	-<strong>Root</strong> is reached when boundary is reached, so root edge always are <strong>boundary edges</strong><br>
	-<strong>Branching</strong> is detected by checking if branch's next level polygons are forming a closed loop<br>
	-If there is a branching, branch is stopped and put in a waiting list, until a connection with another branch is found<br>
	-When there is a connection a new branch is created from merged branches, and start walking...<br>
	</p>
	<img src="images/WalkMesh.gif" class="picture"></img><br>
	<br>
	<div class="compound">
	<p><strong>ELIHairGetMeshData Compound</strong></p>
	<p> First compound is on the polymesh guide itself<br>
	This compound walk over guide geometry, initialize hair skeleton structure and cache topology datas<br>
	in a ICE CDataArrayCustomType ELIHairMeshData. This data will travel across the trees. It's the core of the plugin.<br>
	This tree should update BEFORE any deformation(dynamics, rigging...)<br>
	</p>
	<img src="images/GetMeshData.jpg" class="picture"></img>
	</div><br>
	
	<div class="compound">
	<p><strong>ELIHairSetMeshData Compound</strong></p>
	<p> Second compound is also on polymesh guide<br>
	This compound update previously cached geometry data, this node should update AFTER any deformation(dynamics, rigging...)<br>
	</p>
	<img src="images/SetMeshData.jpg" class="picture"></img>
	</div>
	
	<p><strong>2 : Hair Generation</strong><br></p>
	<p>- an empty Point Cloud with ELIHair_EmitFromMesh compound on an unsimulated ICETree<br>
	- generate hair skeleton guide<br>
	- emit hair guides<br>
	- turbulize/frizz<br>
	- possible extension via an Execute Input Port<br>
	- clone hair guides<br>
	- delete hair skeleton<br>
	- randomize color<br>
	- set size<br>
	</p>
	
	<br>
	
	<div class="compound">
	<p><strong>ELIHairEmitFromMesh Compound</strong></p>
	<p> Last but not least compound, on an empty PointCloud.<br>
	This compound is a Top-Level compound and is in fact composed by multiples compounds<br>
	</p>
	<img src="images/EmitFromMesh.jpg" class="picture"></img>
	</div>
	
	<nav>
		<ul>
			<li><a href="#top">Top</a></li>
		</ul>
	</nav>
	
</body>
</html>

